# Gimme Food PWA - 产品需求文档

## 产品概述

**问题陈述：**
每日三餐的选择困难消耗大量心理能量，用户需要一个能消除选择疲劳的工具。

**解决方案：**
一个中文渐进式网页应用(PWA)，通过预配置餐厅选项和智能"给我食物!"按钮来消除选择疲劳。

## 功能需求

### MVP 核心功能

#### 1. 首次用户引导和设置
**功能描述：**
- 新用户打开应用时显示设置引导按钮
- 快速添加餐厅/外卖选项流程

**详细需求：**
- 餐厅信息录入界面包含：
  - 餐厅名称（文本输入）
  - 等级选择：夯 > 顶级 > 人上人 > NPC > 拉完了
  - 适用餐点：早餐、午餐、晚餐、零食（多选）
- 用户可连续添加多个餐厅
- 完成设置后进入主应用状态

#### 2. 主核心功能："给我食物!"
**功能描述：**
- 点击"给我食物!"魔法按钮
- 系统询问抽象问题创造控制感
- 用户选择餐点类型
- 基于算法推荐餐厅选项

**详细需求：**
- 主界面突出"给我食物!"按钮
- 点击后触发抽象问题系统：
  - 大量抽象问题库随机选择
  - 纯心理作用问题（多数）：如"太阳还是月亮？"
  - 算法影响问题（少数）：如"冒险还是舒适？"
  - 同一影响逻辑可对应多个不同抽象问题
- 问题选择后显示餐点类型选择：早餐、午餐、晚餐、零食
- 推荐结果显示餐厅名称和相关信息

#### 3. 用户反馈和重新选择流程
**功能描述：**
三步渐进式重选机制

**详细需求：**
- 初始推荐后用户选择：
  - "就吃它！"按钮（接受推荐）
  - 不满意则进入重选流程
- 重选步骤：
  - 步骤1：重新摇号按钮（提供新的单一选项）
  - 步骤2：提供2个选项供用户选择
  - 步骤3：显示完整好选项列表
- 每个步骤都可以退回主菜单

#### 4. 智能权重算法
**功能描述：**
基于用户行为动态调整餐厅权重

**算法需求：**
- 等级优先级：夯 > 顶级 > 人上人 > NPC > 拉完了
- 等级降级规则：用户拒绝1次即降级
- 跨等级选择：高等级选项用完后自动选择下一等级
- 最近选择权重惩罚：刚选过的餐厅临时降级处理（如夯餐厅刚选过，本次权重按顶级计算）
- 抽象问题影响权重：
  - 冒险选择：提升长期未选餐厅权重（约1个等级）
  - 舒适选择：提升最近选择餐厅权重（约1个等级）
- 自动等级调整：拒绝即降级

#### 5. 餐后反馈系统
**功能描述：**
用户选择推荐后，下次使用时收集上次用餐体验

**详细需求：**
- 触发条件：仅当用户上次选择了推荐餐厅
- 询问："上次的外卖怎么样？"
- 反馈选项：好/一般（可跳过）
- 根据反馈调整餐厅等级：
  - 好：保持或升级
  - 一般：降级
- 用户可轻松跳过反馈

### 基础管理功能（MVP包含）

#### 6. 餐厅管理
**功能描述：**
用户可随时添加、编辑、删除餐厅选项

**详细需求：**
- 单个餐厅添加功能（与初始设置相同流程）
- 餐厅列表查看
- 编辑现有餐厅信息
- 删除餐厅选项
- 通过汉堡菜单或类似UI方式访问（参考优秀UI设计）

### 未来功能（非MVP）

#### 7. 数据备份和恢复
**功能描述：**
导出/导入用户餐厅数据，防止数据丢失

**详细需求：**
- 导出所有数据为代码字符串格式
- 通过代码字符串导入恢复数据
- 简单的复制粘贴操作

#### 8. 营养分析功能
**功能描述：**
用户输入实际用餐内容，AI估算营养信息

**详细需求：**
- 用餐内容文本输入
- 接入免费LLM API进行营养估算
- 营养数据展示和历史记录

## 用户界面需求

### 语言和本地化
- 全中文界面
- 中文餐厅名称和选项支持
- 中文等级系统展示

### 页面结构
1. **引导页面**：首次用户设置引导
2. **设置页面**：餐厅添加和管理
3. **主页面**：选择餐点类型和"给我食物!"按钮
4. **推荐页面**：显示推荐结果和反馈选项
5. **管理页面**：餐厅列表和编辑功能

### 用户体验要求
- 响应式设计，移动端优先
- PWA离线功能
- 快速加载和响应
- 直观的中文用户界面

## 技术需求

### 数据存储
- 本地存储用户餐厅数据
- 用户偏好和历史记录
- 权重算法状态保存

### PWA特性
- 离线功能
- 可安装到设备
- 服务工作者缓存策略

## 成功指标

### MVP阶段
- 用户能够完成初始设置
- "给我食物!"功能正常工作
- 权重算法有效运行
- 用户反馈系统收集数据

### 用户体验
- 平均决策时间减少
- 用户满意度（通过餐后反馈）
- 应用使用频率